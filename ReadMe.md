# Incode test user API
[Detailed requirements](https://docs.google.com/document/d/1AdmYWAsjNcBM5zdg4jQxBLpiPr9HtQ76HIfZR_2KWjE/edit)

A MongoDB server at [Clever Cloud](https://www.clever-cloud.com/) was used as the database for local development

### Build and run instructions for Docker

- Run the following maven goal to create .jar
```
mvn package
```
- Build a docker image using the built .jar file
```
docker-compose build
```
- Run the setup
```
docker-compose up
```

The autogenerated Swagger API is available at ``` http://{domain}:{port}}/swagger-ui/index.html ```

### Build and run instructions for local

Set active profile to ```'dev' ``` and set the ```'DB_URI'``` environment variable

### Decisions & assumptions
The overall architecture for the application contains 3 primary components:

- Controller (responsible for endpoint mapping)
- Service (responsible for business logic)
- Repository (database interaction)

There's also a Dockerfile that contains configuration for the API service and docker-compose, that defines the container setup. 


- Data management:

  - Added limits to the max length of name and email fields, used regex to filter invalid email formats.
  - Added a service-level check that prevents creation of users with same emails (in order not to depend on the database for this feature's implementation)
  - Indexed email field in DB (faster search and constraint for the field to be unique)
  - Implemented 404 errors for the case when searched entity isn't found (except empty page)
  - Used DTO pattern (decouples DB entities from the data returned by the API)

- Error handling:
  
  - User RestAdvice as the component that handles the exceptions (relieves the controller from repetitive try-catch statements and allows for global error handling between multiple controllers)
  - Defined a DTO object for passing error messages

- Endpoint mapping

  - Appended 'api/v1' to absolute path as a way to trace the versions of the api
